{% extends 'base/base.html' %}
{% block nav_dashboard %}
{% if not my_shares %}
    class="active"
{% endif %}
{% endblock %}


{% block nav_my_share%}
{% if my_shares %}
    class="active"
{% endif %}
{% endblock %}

{% load static %}

{% block title %}
Eudaimonia | Your Dashboard
{% endblock %}

{% block body %}
<link rel="stylesheet" href="{% static 'dashboard/dashboard.css' %}">

<body id="dashboard">
    <div class="dashboard-container">
        <div class="dashboard-nav">
            <form id="search" method="post">
                {% csrf_token %}
                {{ form.search }}
                <button class="search-button"   type="submit"><i class="ri-search-line"></i></button>
            </form>
            
            <div class="mini-nav">
                <a href="{% url 'dashboard' %}" style="color: #301dad;"><i class="ri ri-dashboard-line"></i></a>
                <a {% block nav_share%}{% endblock %} href="{% url 'share' %}"><i class="ri ri-add-box-line"></i></a>
                <a {% block nav_story%}{% endblock %} href="{% url 'my_share' %}"><i onclick="changecolor(this);" class="ri ri-stack-line"></i></a>
            </div>

            <br /><br /><br />
        </div>
        <div class="infinite-container">
                    {% for post in page_obj %}
                    <div class="infinite-item">
                        <h2 class="post-title">{{ post.title }}</h2>
                        <h5 >{{ post.date }}</h5>
                        <p>{{ post.post|truncatechars:150 }} 
                            <!-- <a class="read-more" href="{% url 'story' id=post.id %}">Read more</a>  -->
                        </p>
                    </div>
                    {% endfor %}
        </div>

        <p class="loading">Loading...</p>
        <div class="column">
            {% if page_obj.has_next %}
            <a class="infinite-more-link" href="?page={{ page_obj.next_page_number }}"></a>
            {% endif %}
        </div>
    </div>

    <div class="post-card">
        <h5 class="datePost"></h5>
        <h2 class="titlePost" >Some placeholder title here</h2>
        <p class="contentPost">Lorem ipsum dolor sit amet consectetur adipisicing elit. Officia totam autem perspiciatis, aperiam quam tempore cupiditate voluptate. Eum ipsum consequuntur quasi molestias, quod officia quo ut fuga magnam. Obcaecati repudiandae aliquam totam inventore laudantium autem, debitis qui aliquid dignissimos tempora ab aspernatur natus eligendi quod dolorum reiciendis esse quasi. Unde laboriosam tempora aliquid quas voluptatem sunt praesentium modi in dolorem, error, labore optio vero tempore? Atque labore laborum iure pariatur? Delectus odio atque, eum exercitationem temporibus aliquam quis velit fugit! Officia, sunt quam. Consequatur accusantium distinctio ad nesciunt pariatur voluptatem similique nulla odio. Dicta, consequuntur quae nesciunt voluptatem consectetur obcaecati. Lorem ipsum dolor sit, amet consectetur adipisicing elit. Tempore totam delectus reiciendis rerum. Sed sapiente nihil, delectus corrupti facere voluptatibus quas ab eos ducimus ut. Delectus adipisci minima maxime. Unde dolor iusto similique provident atque, ipsum ratione sint ea laborum culpa eius placeat ut. Tempore placeat ad possimus similique, facilis rem earum corporis! Modi neque quasi at quo quaerat quibusdam fugit. Nobis explicabo voluptatem cumque libero perferendis? Ipsum molestiae suscipit quisquam aut nemo nesciunt Modi neque quasi at quo quaerat quibusdam fugit. Nobis explicabo voluptatem </p>
    </div>


    <script src="/static/infinite scroll js/jquery.waypoints.min.js"></script>
    <script src="/static/infinite scroll js/infinite.min.js"></script>
    <script>
        var infinite = new Waypoint.Infinite({
            element: $('.infinite-container')[0],
            offset: 'bottom-in-view',
            onBeforePageLoad: function () {
                $('.loading').show();
            },
            onAfterPageLoad: function () {
                $('.loading').hide();
            }
        });
        document.getElementsByClassName("infinite-item").onclick = function () {

        }

        // function displayfull(el){
        //     const nodeList = el.childNodes;
        //     let text = "";
        //     for (let i = 0; i < nodeList.length; i++) {
        //     text += nodeList[i] + "<br>";
        //     }
        //     document.querySelector(".contentPost").innerHTML = text;
        // }
    </script>
</body>
{% endblock %}